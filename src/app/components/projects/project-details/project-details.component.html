<div class="d-inline-block w-100 p-3"><span class="h2">{{project?.title}}</span><span class="h3 float-right">Kierownikiem projektu jest {{project?.projectMenager.name}}</span></div>
<div class="ui-g">
  <div class="ui-g-7">
    <p-panel header="{{project?.name}}" [toggleable]="true" [collapsed]="true">
      {{project?.description}}
    </p-panel>

    <div>
      <p-dataList [value]="messages" [immutable]="false" [scrollable]="true" scrollHeight="250px">
        <p-header>Komentarze</p-header>
        <ng-template let-message let-i="index" pTemplate="item">
          <div [ngClass]="{'bg-gray': i % 2 === 1}" >
            <div class="ui-g ui-fluid ">
              <div class="ui-g-6">
                <h6>{{message.userName}}</h6>
              </div>
              <div class="ui-g-6">
                <h6 class="float-right">{{message.date | date: dateFormat}}</h6>
              </div>
            </div>
            <div class="ui-g ui-fluid">
              <div class="ui-g-12">
                <pre class="dataGridContentRow">{{message.content}}</pre>
              </div>
            </div>
          </div>
        </ng-template>
      </p-dataList>
    </div>
    <div class="commentary-field">
      <textarea class="newComment" pInputTextarea width="100%" [(ngModel)]="newCommentText" placeholder="Komentarz..." ></textarea>
      <button class="float-right ui-button-secondary" (click)="addComment()" pButton type="button" label="Dodaj komentarz"></button>
    </div>
  </div>

  <div class="ui-g-5">
    <p-tabView>
      <p-tabPanel header="Zadania">

      </p-tabPanel>
      <p-tabPanel header="Dokumenty">
        <li class="list-group-item" *ngFor="let document of project?.documents">
          <a href="/document-details/{{document.id}}">{{document.name}}</a>
        </li>
      </p-tabPanel>
      <p-tabPanel header="Użytkownicy" [selected]="true">
        <div *ngFor="let userNameAndId of project?.users">
          <h3>{{userNameAndId.name}}</h3>
        </div>

        <button type="text" (click)="showSB()" pButton icon="fa-user-plus" *ngIf="isManager" label="Dodaj użytkowników"></button>
      </p-tabPanel>
    </p-tabView>
  </div>

  <p-sidebar [(visible)]="displaySidebar">
    <span class="h5">Proszę wybrać użytkowników</span>
    <li class="list-group-item" *ngFor="let user of notAssignedUsers">
      <p-checkbox name="groupname" value="{{user.id}}" label="{{user.name}}" [(ngModel)]="selectedUsers"></p-checkbox>
    </li>

    <div class="d-inline-block">
      <button class="ui-button-success"
              type="button" pButton type="button"
              icon="fa-check" iconPos="left"
              label="Ok" (click)="acceptSB()"></button>
      <button class="ui-button-danger" type="button"
              pButton type="button" icon="fa-times"
              iconPos="left" label="Cofnij" (click)="closeSB()"></button>
    </div>
  </p-sidebar>
</div>



